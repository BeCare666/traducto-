<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
            crossorigin="anonymous">
        <link rel="stylesheet" href="admin.css">
        <title>Administration</title>
        <link href="../images/Traducto1-1.png" rel="icon">       
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.2/dist/sweetalert2.all.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.2/dist/sweetalert2.min.css">
       <link rel="stylesheet" href=" https://fonts.googleapis.com/css?family=Lato:300">
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
        

    </head>

    <body id="idbody">
        <p id="smsIdabn"><i class="fa fa-key"></i> Chers traducteurs, profitez de nos abonnements exclusifs dès maintenant <a href="../pricing/pricingx.html" id="smsIdabnlink">&nbsp;&nbsp;&nbsp;ici.</a> <strong id="smsIdabnclose">&nbsp;&nbsp;&nbsp;x</strong></p>
        <!-- Dashboard --> 
        <div class="d-flex flex-column flex-lg-row h-lg-full
            bg-surface-secondary" id="dashbody">
            <!-- Vertical Navbar -->
            <nav class="navbar show navbar-vertical h-lg-screen navbar-expand-lg
                px-0 py-3 navbar-light bg-white border-bottom border-bottom-lg-0
                border-end-lg"
                id="navbarVertical">
                <div class="container-fluid">
                    <!-- Toggler sidebarCollapse
                    <button class="navbar-toggler ms-n2" type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#sidebarCollapse"
                        aria-controls="sidebarCollapse" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>-->
                    <!-- Brand -->
                    <a class="" href="#">
                        <img src="../images/Traducto1-1.png" alt="..." style="height: 23vh; width: 100%; align-items: center !important;" id="logoId">
                    </a>
                    <!-- User menu (mobile) -->
                    <div class="navbar-user d-lg-none">
                        <!-- Dropdown -->
                        <div class="dropdown">
                            <!-- Toggle 
                        <a href="#" id="sidebarAvatar" role="button" data-bs-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <div class="avatar-parent-child">
                                <img alt="Image Placeholder"
                                    src="https://images.unsplash.com/photo-1548142813-c348350df52b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80"
                                    class="avatar avatar- rounded-circle">
                                <span class="avatar-child avatar-badge bg-success"></span>
                            </div>
                        </a>-->
                            <!-- Menu -->
                            <div class="dropdown-menu dropdown-menu-end"
                                aria-labelledby="sidebarAvatar">
                                <a href="#" class="dropdown-item">Profile</a>
                                <a href="#" class="dropdown-item">Settings</a>
                                <a href="#" class="dropdown-item">Billing</a>
                                <hr class="dropdown-divider">
                                <a href="#" class="dropdown-item">Se déconnecter</a>
                            </div>
                        </div>
                    </div>
                    <!-- Collapse -->
                    <!--insert dans le div suivant la classe "collapse" à côtéde la classe "navbar-collapse" -->
                    <div class=" navbar-collapse" id="sidebarCollapse">
                        <!-- Navigation -->
                        <ul class="navbar-nav" style="display: none;">
                            <li class="nav-item">
                                <a class="nav-link" href="#">
                                    <i class="bi bi-house"></i> Dashboard
                                </a>
                            </li>
                          
                        </ul>
                        <!-- Divider -->
                        <hr class="navbar-divider my-5 opacity-20">
                        <!-- Navigation -->
                        <ul class="navbar-nav mb-md-4" id="traductoId"
                            style="overflow-y: auto;height: 300px; border: 1px
                            rgb(81, 95, 226) solid; border-radius: 2px 22px 2px
                            22px; width: 100% !important;">
                            <li>
                                <div class="nav-link text-xs font-semibold
                                    text-uppercase text-muted ls-wide" href="#"
                                    style="display: none;">
                                    Contacts
                                    <span
                                        class="badge bg-soft-primary
                                        text-primary rounded-pill d-inline-flex
                                        align-items-center ms-4">13</span>
                                </div>
                            </li>
                            <p id="getAllmessageforsite">
                            <div style = "display: flex; justify-content: center; ">
                                <img src="../images/traduction_professionnelle.jpg" alt=""   id="mytraductId">
                            </div>
                            </p>
                        </ul>
                        <!-- Push content down -->
                        <div class="mt-auto"></div>
                        <!-- User (md) -->
                        <!-- import * as alias from 'module';-->
                        <!-- import * as alias from 'module';-->
                        <!-- import * as alias from 'module';--> 
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="./../index.html">
                                    <i class="bi bi-person-square"></i>Visiter
                                    le site
                                </a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" id="accountID" href="../walletx/wallet.html">
                                    
                                </a>
                            </li>
                            <li class="nav-item" style="display: none !important;">
                                <a class="nav-link" href="./../logintrad.html"
                                    id="logoutid">
                                    <i class="bi bi-box-arrow-left"></i> Logout
                                </a>
                            </li>
                            <li class="nav-item ">
                                <a style="cursor:pointer"  class="nav-link" id="modalMyDropdownwxc">
                                 
                                  </a>
                              </li> 
                          <li class="nav-item ">
                            <a style="cursor:pointer; width: 25vh !important; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;"  class="nav-link" id="modalMyDropdownx">
                             
                              </a>  
                          </li>
                          <li class="nav-item ">
                            <a style="cursor:pointer"  class="nav-link" id="abnComptId">
                             
                              </a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" data-dismiss="modal"
                            aria-label="Close" style="cursor:pointer" data-toggle="modal" data-target="#exampleModalCenterIdpaid">
                                <i class="bi bi-wallet2"></i> Paiement
                              </a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" style="cursor:pointer" target="_blank" id="deletemyComptId">
                                <i class="bi bi-trash-fill"></i> Supprimer
                               </a>
                          </li>
                          <li class="nav-item">
                            <span class="nav-item" id="affiliateID" >
                          <a class="nav-link" style="cursor: pointer;"> Copie ton lien d'affiliation.</a>
                          <form data-copy=true>
                          <input id="linkInput" type="text" data-click-select-all style="border: none !important; cursor: pointer; border-radius: 5px !important;" />
                          </form>
                        </span>
                        </li>
                          <li class="nav-item">
                            <a class="nav-link"  style="cursor:pointer" id="logoutId">
                                <i class="bi bi-box-arrow-left"></i> Se deconnecter
                               </a>
                          </li>
                        </ul>

                    </div>
                </div>
            </nav>
            <!-- Main content -->
            <div class="h-screen flex-grow-1" id="hooooooo">
                <style>
                #hooooooo {
                    overflow-y: hidden !important;
                }
            </style>
                <!-- Header -->
                <header class="bg-surface-primary border-bottom pt-6">
                    <div class="container-fluid">
                        <div class="mb-npx">
                            <div class="row align-items-center" style="display: none !important;">
                                <div class="col-sm-6 col-12 mb-4 mb-sm-0" >
                                    <!-- Title -->
                                    <h1 class="h2 mb-0 ls-tight">Administration</h1>
                                    <div class="col-xl-12 col-sm-12 col-12">
                                        <div class="card shadow border-0">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col">
                                                        <span
                                                            class="h6
                                                            font-semibold
                                                            text-muted text-sm
                                                            d-block mb-2">Notre
                                                            Objectif dans 24
                                                            mois</span>
                                                        <span class="h3
                                                            font-bold mb-0">75
                                                            000 $</span>
                                                    </div>
                                                    <div class="col-auto">
                                                        <div
                                                            class="icon
                                                            icon-shape
                                                            bg-tertiary
                                                            text-white text-lg
                                                            rounded-circle">
                                                            <i class="bi
                                                                bi-credit-card"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="mt-2 mb-0 text-sm"
                                                    style="display: none;">
                                                    <span class="badge
                                                        badge-pill
                                                        bg-soft-success
                                                        text-success me-2">
                                                        <i class="bi bi-arrow-up
                                                            me-1"></i>13%
                                                    </span>
                                                    <span class="text-nowrap
                                                        text-xs text-muted">Since
                                                        last month</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Actions -->
                                <div class="col-sm-6 col-12 text-sm-end">
                                    <div class="mx-n1">
                                         <!-- Actions 
                                        <a href="#" class="btn d-inline-flex
                                            btn-sm btn-neutral border-base
                                            mx-1">
                                            <span class=" pe-2">
                                                <i class="bi bi-pencil"></i>
                                            </span>
                                            <span>Mise à jour</span>
                                        </a>-->
                                        <a href="#" class="btn d-inline-flex
                                            btn-sm btn-primary mx-1">
                                            <span class=" pe-2">
                                                <i class="bi bi-plus"></i>
                                            </span>
                                            <span data-whatever="@mdo"
                                                id="AceptPlanning">Poster les
                                                Projets</span>
                                        </a>
                                        <a href="" style="opacity: 0;">fhkl</a>
                                    </div>
                                </div>
                            </div>
                            <div class="modal fade" id="exampleModal" 

                                tabindex="-1" role="dialog"
                                aria-labelledby="exampleModalLabel"
                                aria-hidden="true" style="background-color: lightcoral !important;">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title"
                                                id="exampleModalLabel">Produit à
                                                poster</h5>
                                            <button type="button" class="close"
                                                data-dismiss="modal"
                                                aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <form>
                                                <div class="form-group">
                                                    <label for="recipient-name"
                                                        class="col-form-label">Nom
                                                        du Produit:</label>
                                                    <input type="text"
                                                        class="form-control"
                                                        id="recipient-name1">
                                                    <label for="recipient-name"
                                                        class="col-form-label">Photo 1 :</label>
                                                    <input type="file"
                                                        class="form-control"
                                                        id="recipient-name2">
                                                        <label for="recipient-name"
                                                        class="col-form-label">Photo 2 :</label>
                                                    <input type="file"
                                                        class="form-control"
                                                        id="recipient-name2X">

                                                        <label for="recipient-name"
                                                        class="col-form-label">Photo 3 :</label>
                                                    <input type="file"
                                                        class="form-control"
                                                        id="recipient-name2X3">

                                                        <label for="recipient-name"
                                                        class="col-form-label">Photo 4 :</label>
                                                    <input type="file"
                                                        class="form-control"
                                                        id="recipient-name2X4">

                                                    <label for="recipient-name"
                                                        class="col-form-label">Quantité disponible :</label>
                                                    <input type="tel"
                                                        class="form-control"
                                                        id="recipient-name4">

                                                      <label for="recipient-name"
                                                        class="col-form-label">Prix Promo</label>
                                                    <input type="tel"
                                                        class="form-control"
                                                        id="recipient-name3">

                                                        
                                                      <label for="recipient-name"
                                                      class="col-form-label">Prix Normo</label>
                                                  <input type="tel"
                                                      class="form-control"
                                                      id="recipient-name3Prix">

                                                    <label for="recipient-name"
                                                        class="col-form-label">La catégorie
                                                        :</label>
                                                    <select
                                                        id="exampleFormControlSelect1"
                                                        class="form-control"
                                                        style="height: 50px;">
                                                        <option selected></option>
                                                       <option value="Pièces moteur ">Pièces moteur </option>
                                                       <option value="Système de freinage">Système de freinage</option>
                                                       <option value="Suspension et direction">Suspension et direction</option>
                                                       <option value="Système d'échappement ">Système d'échappement </option>
                                                       <option value="Éclairage et électrique ">Éclairage et électrique </option>
                                                       <option value="Transmission et embrayage">Transmission et embrayage </option>
                                                       <option value="Filtres">Filtres </option>
                                                       <option value="Système de refroidissement">Système de refroidissement</option>
                                                       <option value="Pièces de carrosserie">Pièces de carrosserie</option>
                                                       <option value="Intérieur et accessoires">Intérieur et accessoires</option>
                                                       <option value="Pneus et roues">Pneus et roues</option>
                                                       <option value="Système de carburant">Système de carburant</option>
                                                       <option value="Système d'allumage">Système d'allumage</option>
                                                       <option value="Système de climatisation et chauffage ">Système de climatisation et chauffage </option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label for="message-text" class="col-form-label">Description:</label>
                                                    <p style="text-align: start !important;" id="TextCounpt"></p>
                                                    <textarea  class="form-control" id="message-text" style="height: 150px;" oninput="countCharacters()"
                                                    maxlength="500" minlength="125" required></textarea>
                                                </div>
                                            </form>
                                            
									
									
									
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" id="Selbtn1" data-dismiss="modal">Fermer</button>
                                            <button type="button" data-dismiss="modal" class="btn btn-primary"  id="Insbtn">Poster le Produit</button>
                                            <button type="button" data-dismiss="modal" class="btn btn-primary" id="Updbtn" style="display: none;">Metrre à jour</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Nav -->
                            <ul class="nav nav-tabs mt-4 overflow-x border-0" id="allMyFillId">
                                
                                <li class="nav-item " id="smsIdabnli">                        
                                    <a href="#" class="nav-link active">Tous les
                                        fichiers</a>
                                </li>
                        <!--  <li class="nav-item">
                        <a href="#" class="nav-link font-regular">Shared</a>
                        </li>
                        <li class="nav-item">
                        <a href="#" class="nav-link font-regular">File requests</a>
                        </li>-->
                            </ul>
                        </div>
                    </div>
                </header>
                <!-- Main -->
                <main class="py-6 bg-surface-secondary">
                    <div class="container-fluid">

                        <div class="card shadow border-0 mb-7" style="
                            padding:4px;

                            height: 510px;
                            overflow-x: hidden;
                            overflow-y: auto;
                            text-align:justify;">
                            <div class="card-header">
                                <h5 class="mb-0">Tout nos Projets</h5>
                            </div>
                            <div class="table-responsive" style="margin-bottom:
                                30px;">
                                <table class="table table-hover table-nowrap">
                                    <thead class="thead-light">
                                        <tr>
                                            <th scope="col">Nom</th>
                                            <th scope="col">Date</th>
                                            <th scope="col">Status</th>
                                           <th scope="col">Traducteur</th>
                                            <!--- <th scope="col">Prix promo fcfa</th>-->
                                            <th scope="col">Nom du fichier</th>
                                            <th scope="col">Id</th>

                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody id="createAllproduct">
                                    </tbody>
                                </table>
                                <div id="createAllproductnodata"></div>

                            </div>
                           <!--- <div class="card-footer border-0 mb-7">
                                <span class="text-muted text-sm">Votre
                                    répertoire des Projets.</span>
                            </div>-->
                        </div>
                    </div>
                </main>
            </div>  
        </div>
        <div class="modal fade" id="exampleModalCenterAll" tabindex="-1"
            role="dialog"
            aria-labelledby="exampleModalCenterTitle" aria-hidden="true" style="background-color: lightcoral !important;">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content" >
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalCenterTitle">Modification
                            du Produit</h5>
                        <button type="button" class="close" data-dismiss="modal"
                            aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p style="text-align: center;"> Voulez-vous vraiment
                            mettre à jour cet Produit ?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            data-dismiss="modal" id="idseleectBest">Meilleure</button>

                        <button type="button" class="btn btn-secondary"
                            data-dismiss="modal" id="idseleectdata">Mettre à  jour</button>
                        <button type="button" class="btn btn-danger"
                            id="Delbtn"><i class="bi bi-trash"></i>&nbsp;
                            Supprimer</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="exampleModalCenterAllMessage" tabindex="-1"
            role="dialog"
            aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="container">
                            <div class="row">
                                <div class="col-12">
                                    <span id="idObjetMessage"></span>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <span id="idEmailMessage"></span>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <button type="button" class="close" data-dismiss="modal"
                            aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p id="idMysmsSend"></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" data-dismiss="modal" class="btn
                            btn-danger" id="DelbtnMymesms"><i
                                class="bi bi-trash"></i>&nbsp;
                            Supprimer</button>
                    </div>
                </div>
            </div>
        </div>
        <a style="display: none !important;" data-toggle="modal" data-target="#exampleModalCenterId" class="back-to-top d-flex align-items-center justify-content-center" id="user-button"><i class="bi bi-person-fill"></i></a>
        
      
            <!-- Modal -->
        <div class="modal fade" id="exampleModalCenterId" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
 
                <div class="modal-body">

                </div>
            </div>
            </div>
        </div>
           <!-- Modal -->
           <div class="modal fade" id="exampleModalCenterIdpaid" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
 
                <div class="modal-body" style="display: flex !important;">
                    <input type="text" class="form-control" placeholder="Mettez le montant." id="paieMymoney" oninput="validerSaisie(this)"> 
                    <button type="button" class="btn btn-primary" style="margin-left: 3px;"  id="btnpaieMymoney" data-dismiss="modal">Envoyer</button>
                </div>
            </div>
            </div> 
        </div>

        <div id="preloader"></div>
        <script>
            function validerSaisie(input) {
            const valeurSaisie = input.value;
            const regexLettresAvecEspaces = /^\d+$/;

            if (!regexLettresAvecEspaces.test(valeurSaisie)) {
            //alert("ne fait pas ça")
            // Effacez la saisie incorrecte
            input.value = input.value.replace(/\D/g, '');
            Swal.fire({
              icon: 'error',
              title: 'Oops...',
              text: "Mettez uniquement des chiffres.",
              showConfirmButton: false,
              timer: 1500
            // footer: '<a href="">Why do I have this issue?</a>'
            })
            } else {
            }
        }
        
        function countCharacters() {
        var textarea = document.getElementById("message-text");
        var TextCounpt = document.getElementById("TextCounpt")
        var  maxLength = parseInt(textarea.getAttribute("maxlength"));
        const currentLength = textarea.value.length;
        const remainingChars = maxLength - currentLength;
        TextCounpt.textContent = remainingChars + " caractères restants";
        if (textarea.checkValidity()) {
        textarea.classList.remove("invalid-input");
        textarea.classList.add("valid-input");
        } else {
        textarea.classList.remove("valid-input");
        textarea.classList.add("invalid-input");
        }
      }
        </script>
        <script type="module">

        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCwoswwJrsbu7LhoBVnkyaCAwIOtZmHbpY",
            authDomain: "traducto-2fab6.firebaseapp.com",
            databaseURL: "https://traducto-2fab6-default-rtdb.firebaseio.com",
            projectId: "traducto-2fab6",
            storageBucket: "traducto-2fab6.appspot.com",
            messagingSenderId: "914618680771",
            appId: "1:914618680771:web:24eb2877454b80188ea976"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        import {
            getDatabase,
            ref,
            set,
            update,
            child,
            onValue,
            remove,
            get,
        } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

        import { getStorage, getDownloadURL 
        
        } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-storage.js"

        const db = getDatabase(); 
      
        // function to get all messages in Real Time 
        function getAllDataRealtime() {
            var div = document.getElementById('createAllproduct');
            var myalldatas = [];
            //const UserConnectIdToBuy = localStorage.getItem("storageName");
            const TraductoIdVA = localStorage.getItem("TraductoId"); 
            if (!TraductoIdVA) {
               window.location.href = "../logintrad.html"
            }

            //function to get all data for traductor
            const dbreftraOnvalu = ref(db, "traducteurs/" + TraductoIdVA);
            onValue(dbreftraOnvalu, (snopshot) => {
                var smsIdabn = document.getElementById('smsIdabn');
                //var smsIdabnli = document.getElementById('smsIdabnli');
                var smsIdabnclose = document.getElementById('smsIdabnclose');
                //var traduData =  childsnopshot.val()
                if(snopshot.val().TYPEABONNEMENT){
                smsIdabn.style.display = "none"
                }else{
                    //smsIdabnli.style.display = "none"  
                }
                smsIdabnclose.addEventListener('click', function(){
                smsIdabn.style.display = "none"
                //smsIdabnli.style.display = "block"
                })

                
            //function to generate affilition link
            const linkInput = document.getElementById('linkInput');
                const copyButton = document.getElementById('affiliateID');
                //linkInput.value = `Copier ici votre lien d'affiliation.`
                // function to hide border when you click
                copyButton.addEventListener('click', () => {
                linkInput.value = `https://traductox.netlify.app/?traducteur-id=${TraductoIdVA}`
                linkInput.select(); // Sélectionne le texte dans l'input
                document.execCommand('copy'); // Copie le texte sélectionné dans le presse-papiers
                });
            var accountID = document.getElementById('accountID');
            // Start fuction to create account afiliate
            accountID.innerHTML = ` <img src="../images/wallet.svg" alt="">&nbsp;&nbsp;Mon Solde : ${snopshot.val().COMMISSION} $`
            // End fuction to create account afiliate

            // function to secure password
            var securepass = snopshot.val().QUESTIONSECUREPASSWORDRESPONSE
            if(!securepass){
            window.location.href = "../securex/securepassword.html"  
            }else{

            }

                var abnComptId = document.getElementById('abnComptId');
                abnComptId.innerHTML = `  ${snopshot.val().TYPEABONNEMENT ? `<img src="abon.svg" alt="">&nbsp;&nbsp; ${snopshot.val().TYPEABONNEMENT}` : '<img src="abon.svg" alt="">&nbsp;&nbsp;Aucun abonnement'} `            
                var ModalMyDropdown = document.getElementById('modalMyDropdownx');
                ModalMyDropdown.innerHTML = ` <i class="bi bi-envelope-fill"></i> Email : ${snopshot.val().email}`
                if(snopshot.val().isDefaultAccount == true){
                     //var traduData =  childsnopshot.val()            
                var modalMyDropdownwxc = document.getElementById('modalMyDropdownwxc');
                modalMyDropdownwxc.innerHTML = ` <i class="bi bi-person-fill" style="color:green"></i> Actif `
                }else{
                //var traduData =  childsnopshot.val()            
                var modalMyDropdownwxc = document.getElementById('modalMyDropdownwxc');
                modalMyDropdownwxc.innerHTML = ` <i class="bi bi-person-fill" style="color:red"></i> inactif`
                
                Swal.fire({
                    icon: 'error',
                    title: 'Ooops..',
                    text: "Nous désolé de vous informer que votre compte est inactif. Connectez traducto pour en savoir plus. Merci !",
                    showConfirmButton: false,
                    allowOutsideClick : false,
                footer: '<a href="mailto:traducto.inter@gmail.com">Connectez-nous </a>'
                })
                }

            var btnpaieMymoney =  document.getElementById('btnpaieMymoney');
            
            btnpaieMymoney.addEventListener('click', function(){
               // alert(snopshot.val().email),
               // alert(snopshot.val().username);
            var  paieMymoney =  document.getElementById('paieMymoney').value;
            if(paieMymoney){
             //  envoi de mail de suspension
             const apiKey = "785B4029FA0EA1FB573C09903D5D557568F868BD402BE1746D1852EDFBC87D0249E623331ADD62923850AE601C019743";
                const apiUrl = "https://api.elasticemail.com/v2/email/send";
                // Définir les paramètres de l'e-mail
                const emailParams = {
                  apiKey: apiKey ,
                  subject: "Demande de paiement.",
                  from:   "traducto.inter@gmail.com",
                  fromName: snopshot.val().username,
                  to: "traducto.inter@gmail.com",
                  bodyHtml: `
                  <table cellpadding="10" cellspacing="0" style="background-color: #f1f1f1; padding: 20px;">
                  <tr>
                      <td>
                      <strong style="color: #333; text-align: center !important;">Demande de paiement.</strong>
                      <p style="font-size: 16px; color: #666;">
                        Chère traducto,
                        J'espère que ce message vous trouve bien. Je souhaite attirer votre attention sur le paiement d'un montant de ${paieMymoney} FCFA.
                      </p>
                   
                      <p style="font-size: 16px; color: #666;">
                        Merci de votre attention à cette demande, et nous apprécions votre coopération continue.
                      </p>
                        
                      <p style="font-size: 14px; color: #999;">
                          Cordialement,     
                      </p>
                      <p style="font-size: 14px; color: #999;">
                        ${snopshot.val().username}.
                      </p>
                      </td>
                  </tr>
                  </table>
                  `
                };

                // Effectuer une requête POST vers l'API ElasticEmail
                fetch(apiUrl, {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                  },
                  body: new URLSearchParams(emailParams)
                })
                  .then((response) => response.json())
                  .then((data) => {
                  console.log(data); // Afficher la réponse de l'API ElasticEmail
                    if (data.success) {
                        Swal.fire({
                        icon: 'success',
                        text: 'Votre demande envoyée avec succès.',
                        allowOutsideClick : false,
                        }).then((result)=>{
                            if(result.isConfirmed){
                            
                         window.location.href = "traductor.html"
                        }
                    })
                    
                    } else {
                        Swal.fire({
                        icon: 'error',
                        text: `Erreur lors de l'envoi de votre demande.`,
                        allowOutsideClick : false,
                       
                        }).then((result)=>{
                            if(result.isConfirmed){
                            
                         window.location.href = "traductor.html"
                        }
                    })
                    }
                  })
                  .catch((error) => {
                    Swal.fire({
                        icon: 'error',
                        text: `Erreur lors de la requête`,
                        allowOutsideClick : false,
                       
                        }).then((result)=>{
                            if(result.isConfirmed){
                            
                         window.location.href = "traductor.html"
                        }
                    })
                  });
                 // end envoi de mail de suspension
               }else{
            Swal.fire({
         toast: true,
        icon: 'error',
        title: `Le champs n'est pas valide.`,
      animation: false,
     position: 'top',
     showConfirmButton: false,
    timer: 3000,
    timerProgressBar: true,
    didOpen: (toast) => {
    toast.addEventListener('mouseenter', Swal.stopTimer)
    toast.addEventListener('mouseleave', Swal.resumeTimer)
    }
  }); }
})
            })

            const dbref = ref(db, "utilisateurs");
            const dbreftra = ref(db, "traducteurs");
            onValue(dbref, (snopshot) => {
                snopshot.forEach((childsnopshot) => {
                myalldatas.push(childsnopshot.val());
                document.getElementById('preloader').style.display = "none"
            });

            

                // Convertir l'objet d'utilisateurs en un tableau d'objets
                const userArray = Object.entries(myalldatas).map(([key, value]) => ({ id: key, ...value }));

                // Trier le tableau en fonction de la valeur du champ "comptValidé"
                userArray.sort((a, b) => {
                // Mettre les comptes validés en bas
                document.getElementById('preloader').style.display ="none"
                if (a.VALIDERMONCOMPTE && !b.VALIDERMONCOMPTE) {
                    return 1;
                }
                // Mettre les comptes non validés en haut
                if (!a.VALIDERMONCOMPTE && b.VALIDERMONCOMPTE) {
                    return -1;
                }
                // Garder l'ordre actuel si les deux utilisateurs ont la même valeur pour "comptValidé"
                return 0;
                });


                if (userArray.length != 0) {
                    return userArray.forEach((k) => {
                    if(TraductoIdVA == k.MYTRADUCTORID){                             
                    let trow = document.createElement("tr");
                    if(k.DOCSATUS4 == false){
                    trow.addEventListener('click', function () {                   
                    trow.id = `${k.userId}`
                    var theUserId = k.userId
                    localStorage.setItem('userId', theUserId)
                    window.location.href = "./../statusvalidate.html"
                    
                    })
                    }else{
                    trow.style.backgroundColor = "rgba(0, 123, 255, 0.25)"
                    trow.addEventListener('click', function(){
                    Swal.fire({
                    toast: true,
                    icon: 'info',
                    text:`Desolé cette traduction est terminé.`,
                    animation: false,
                    position: 'top',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer)
                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                    })
                    }) 
                    }
                    trow.style.cursor = "pointer"
                    trow.innerHTML =
                            `
                    <td>
                        <img alt="..."
                            src="https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80"
                            class="avatar avatar-sm rounded-circle me-" style="display: none;">
                        <a class="text-heading font-semibold" href="#">
                            <div style="width: 20vh !important; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">XXXXXXXXXXXXXXXXXXXXXXXXX</div> 
                        </a>
                    </td>
                    <td>
                        ${k.DATETIME}
                    </td>
                    <td>
                        <img alt="..."
                            src="https://preview.webpixels.io/web/img/other/logos/logo-1.png"
                            class="avatar avatar-xs rounded-circle me-2">
                        <a class="text-heading font-semibold" href="#">
                            ${k.VALIDERMONCOMPTE} 
                        </a>
                    </td>
                    <td>
                        ${k.MYTRADUCTORID}
                    </td>
                    <td>
                        <div style="width: 20vh !important; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">${k.FILETYPE}</div> 
                    </td>
                    <td class="text-end">
                        <a class=" neutralMyclass">${k.username} </a>
                    </td>
                    <td class="text-end" style="display:none;">
                        <a class="btn btn-sm btn-neutral neutralMyclass">Mise à jour</a>
                        <button type="button"
                            class="btn btn-sm btn-square btn-neutral text-danger-hover">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td>                                                          
                    `
                    div.append(trow)
                    } 
                    })
                    
                    }

                    });
                   
                }

                window.onload = getAllDataRealtime;
 
      
                /// function to delete my compte
                var deletemyComptId = document.getElementById('deletemyComptId')
                deletemyComptId.addEventListener('click', function(){
                Swal.fire({
                    icon: 'info',
                    title: ' Supprimer ?',
                    allowOutsideClick : false,
                    showCancelButton : true,
                    }).then((result)=>{
                        if(result.isConfirmed){
                            // Supprime l'utilisateur de la base de données
                            dbreftra.remove()
                            .then(() => {
                            Swal.fire({
                            icon: 'info',
                            text: ' Utilisateur supprimé avec succès',
                            allowOutsideClick : false,
                            }).then((result)=>{
                                if(result.isConfirmed){
                                window.location.href = "index.html"  
                                }
                            })
                            
                            })
                            .catch((error) => {
                            Swal.fire("Erreur lors de la suppression.", "", "error");
                            
                            });
                    }
                })
                })

 
                // function to logout my compte
                logoutId.addEventListener('click', function(){
                Swal.fire({
                    icon: 'info',
                    title: ' Deconnectez-vous ?',
                    allowOutsideClick : false,
                    showCancelButton : true,
                    }).then((result)=>{
                        if(result.isConfirmed){
                            localStorage.removeItem('TraductoId')
                            window.location.href = "./../logintrad.html"
                    }
                })
                })
                {/*else{
                        document.getElementById('preloader').style.display = "none"
                            var CreateAllproductnodata = document.getElementById('createAllproductnodata')
                                CreateAllproductnodata.innerHTML = `
                                <span style="opacity: 0;">sdfghjklkjhgfd</span>
                                <div style = "display: flex; justify-content: center; margin: auto;">
                                <img src="./../images/no_data.svg" alt="" style = "width: 100%; height: 20vh;">
                                </div> 
                            <p style="text-align: center;">Vous n'avez pas encore de Projet à traduire.</p>
                        `
                    }*/}
        </script>
        <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-storage.js"></script>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
        <script src="database.js"></script>
        <script src="admin.js"></script>
    </body>

</html>
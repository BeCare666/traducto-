<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href=" https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
   <link rel="stylesheet" href=" https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Quattrocento+Sans">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">
    <link href="../images/Traducto1-1.png" rel="icon">       
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.2/dist/sweetalert2.all.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.2/dist/sweetalert2.min.css">
    <link rel="stylesheet" href=" https://fonts.googleapis.com/css?family=Lato:300">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-storage.js"></script>
    <link rel="stylesheet" href="ads.css">
    <link rel="stylesheet" href="admin.css">
    <title>ads</title>
</head>
<body>
    <div class="container">
      <div class="row">
        <div id="userData">

        </div>
      </div>
    </div>
    
  <div class="spacer"></div>
  <a class="back-to-top d-flex align-items-center justify-content-center" id="user-button">
    <i class="fa fa-user"></i></a>
    <div id="preloader"></div> 
  <script type="module">
 
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCwoswwJrsbu7LhoBVnkyaCAwIOtZmHbpY",
            authDomain: "traducto-2fab6.firebaseapp.com",
            databaseURL: "https://traducto-2fab6-default-rtdb.firebaseio.com",
            projectId: "traducto-2fab6",
            storageBucket: "traducto-2fab6.appspot.com",
            messagingSenderId: "914618680771",
            appId: "1:914618680771:web:24eb2877454b80188ea976"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);


        import {
            getDatabase,
            ref,
            set,
            update,
            child,
            onValue,
            remove,
            get,
        } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

        import { getStorage, getDownloadURL 
        
        } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-storage.js"

        const db = getDatabase(); 

    function getUser() {
        const userId = localStorage.getItem('userId')
        const userDataElement = document.getElementById('userData');

        // Get user data from Firestore

        const dbreftra = ref(db, "traducteurs");
            onValue(dbreftra, (snopshot) => {
                snopshot.forEach((childsnopshot) => {
              var userData = childsnopshot.val()
               document.getElementById('preloader').style.display = "none"

                userDataElement.innerHTML = `
                    <div class="col-12">
                    <h1><i class="fa fa-diamond animated infinite jello" aria-hidden="true"></i>  Personnelles
                    </h1>
                    <hr>
                    <ul>
                        <li><strong>Nom et prénoms : </strong> ${userData.Fllname} </li>
                        <li><strong>Address : </strong> ${userData.Address}</li>
                        <li><strong>Date de naissance :</strong>${userData.Naissance}</li>
                        
                    </ul>

                    <h1><i class="fa fa-rocket animated infinite pulse" aria-hidden="true"></i> Contact 
                    </h1>
                    <hr>
                    <ul>
                        <li><strong>Email : </strong> ${userData.Email}</li>
                        <li><strong>Téléphone : </strong> ${userData.Phone}</li>
                        <li><strong>Résumé du profil : </strong> ${userData.Profil}</li>
                        <li><strong>Listez vos paires de langues : </strong> ${userData.Langues}</li>
                    </ul>
                    <h1><i class="fa fa-bolt animated infinite tada" aria-hidden="true"></i> Une experience </h1>
                    <hr>
                    <ul>
                        <li><strong>Nom de l'entreprise :   </strong> ${userData.Campany}</li>
                        <li><strong>Date de début : </strong> ${userData.Start}</li>
                        <li><strong>Date de fin : </strong> ${userData.End}</li>
                        <li><strong>Description : </strong> ${userData.Description}</li>
                    </ul>
                    </div>
                    
                    `;       

            });
        }) 

        // function to delete user
        document.getElementById('user-button').addEventListener('click', function(){
            Swal.fire({
            title: "Voulez vous apporter de changements ?",
            //showDenyButton: true,
            icon:"info",
            showCancelButton: true,
            confirmButtonText: "Supprimer",
            //denyButtonText: `Suspendre`,
            }).then((result) => {
            /* Read more about isConfirmed, isDenied below */
            if (result.isConfirmed) {
             // Supprime l'utilisateur de la base de données
             dbreftra.remove()
            .then(() => {
            Swal.fire("Supprimer!", "", "success");
            })
            .catch((error) => {
            Swal.fire("Erreur lors de la suppression.", "", "error");
                            
            });
               
            } else if (result.isDenied) {
            dbreftra.update({
            isDefaultAccount: true, // Nouvelle valeur              
            })
                        
            Swal.fire("Suspendre", "", "info");
            }
            });
        })
    }
    getUser()
</script>  
</body>
</html>